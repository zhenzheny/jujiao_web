<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta content="telephone=no" name="format-detection">
    <meta name="wap-font-scale" content="no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>教师详情</title>
    <link href="../css/index.css?+Math.random()" rel="stylesheet">
    <link href="../css/scrollbar.css" rel="stylesheet">
    <body class="marginNone padBottom20 theBody">
      <div class="teaHeader">
      	<div id="bgImg" class="laoBg"></div>
       	<div class="out_filter fliter_img"></div>
       	<div class="teaTou"> 
       		<img id="teaImg" class="teaIcon"/>
       		<span class="teaName" id="teaName"></span>
       	</div>
       	<ul class="teaJie">
       		<li><img src="../images/laoLing.png/">
       		<span id="jiaoLing"></span>
       		</li>
       		<li><img src="../images/laoTea.png">
       		<span id="position"></span>
       		</li>
       	</ul>
       </div>
      <div class="mainContent actBlo ">
      
       <ul class="keShiUl teaJianJie marBottom12 borBottom10" id="feeMode">
       </ul>
       <!--一对多多对一-->
          <p class="title color2C size13 padTop20 marBottom10 teaJianJie" style="padding-top: 15px;">
              <span style="color:#cc3333;display:inline-block;width:120px;"><span style="font-size: 12px">￥</span><span id="only_mode"></span></span>
              <span style="border: 1px solid #CCCCCC;border-radius: 5px;padding:5px 15px; font-size: 13px;color:#666666;">1对1</span>
          </p>
          <p class="title color2C size13 padTop20 marBottom10 teaJianJie" style="padding-top: 5px;">
              <span style="color:#cc3333;display:inline-block;width:120px;"><span style="font-size: 12px">￥</span><span id="more_mode"></span></span>
              <span style="border: 1px solid #CCCCCC;border-radius: 5px;padding:5px 15px; font-size: 13px;color:#666666;">1对多</span>
          </p>
          <div class="greyMargin8"></div>
       <p class="title color2C size13 padTop20 marBottom10 teaJianJie">老师简介</p>
            <p class="tea_line size12 borTop color999 hasBig posRelite teaJieShao teaJianJie">毕业学校&nbsp;&nbsp;<span class="width50P" id="adress"></span></p>
            <div class="webkBlo tea_line marTop4 teaJieShao teaJianJie">
            	<span class="size12 color999">老师标签&nbsp;&nbsp;</span>
            	<p id="biaoQian" class="webInp" style="color:#656565;"></p>
            </div>
       	<div class="greyMargin8"></div>
        <p class="color8d size13 showtitle teaJianJie">自我介绍</p>
        <div class="teaJianJie">
        	<p class="size12 color999 selfCon" id="descript"></p>
        </div>
          <div class="greyMargin8"></div>
          <p class="color8d size13 showtitle teaJianJie">工作经历</p>
          <!--工作经历-->
          <div class="about4">
              <div class="about4_main">
                  <div class="line"></div>
                  <ul id="exp">
                      
                  </ul>
              </div>
          </div>

          <!--工作经历-->
      </div>

    <div class="liaoAnBlo"></div>
    <script src="../js/zepto.min.js"></script>
    <script src="../js/iscroll.js"></script>
		<script src="../js/iscroll4.2.5.js"></script>
		<script src="../js/startScore.js"></script>
		<script src="../js/common.js"></script>
      <script>!(function($) {
        var g = {
          init: function() {
            var _t = this;
            //调用tab
            //_t.tab();
            /*老师详情*/
           _t.teaDetail();
	         /*加载图片*/
	       _t.default();
	        /*课程提纲*/
	       //_t.syllabus();
          },
          //调用tab
          tab: function() {
            var _t = this;
            $(".tabUl li").each(function(index, element) {
              var i = index;
              $(this).on('click',
              function() {
                $(".tabUl li").removeClass("active");
                $(this).addClass("active");
                $(".tabContent .tabCon").hide();
                $(".tabContent .tabCon").eq(i).show();

              });
            });
          },
          /*老师详情*/
         teaDetail:function(){
         	var _t=this;
        	 //通过链接获取id
            var url=location.search; 
						if(url.indexOf("?")!=-1) 
						{
							function GetQueryString(name)
							{
							     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
							     var r = window.location.search.substr(1).match(reg);
							     if(r!=null)return  unescape(r[2]); return null;
							}
							GetQueryString("id");
							var idNum=GetQueryString("id");
							var teacher_id=GetQueryString("teacher_id");
							var relaId=idNum;
							var uId=userId;
							//var parm={"id":idNum,"teacher_id":teacher_id};
							var parm={"teacher_id":teacher_id};
						}
						else{
							var parm={"id":1,"user_id":1};
							var relaId=1;
							var uId=1;
						}
                $.ajax({
                    type: 'POST',
                    url: jieUrl+'100603',
                    data: parm,
                    //headers:{ut:tokenData},
                    dataType: 'json',
                    success: function(data) {
                    	var data=data.d;
                    	$('#teaImg').attr("src",data.img_url);
                    	$('#teaName').html(data.nickname);
                    	if(data.teach_age)
                    	  $('#jiaoLing').html(data.teach_age+'年教龄');
                    	if(data.subject_name)
                    	  $('#position').html(data.subject_name+'老师');
                    	var teacherModeList=data.teacherModeList;
                    	if(teacherModeList){
	                    	for(var i=0;i<teacherModeList.length;i++){
	                    		var teacherMode=teacherModeList[i];
	                    		if(teacherMode.teach_mode==1){
	                    			if(teacherMode.fee_price)
	                    			  $('#only_mode').html(teacherMode.fee_price+"元/小时");
	                    		}
	                    		if(teacherMode.teach_mode==2){
	                    			if(teacherMode.fee_price)
	                    			  $('#more_mode').html(teacherMode.fee_price+"元/小时");
	                    		}
	                    	}
                    	}
                    	$('#adress').html(data.university);
                    	var tagList=data.tagList;
                    	var html="";
                    	if(tagList){
	                    	for(var i=0;i<tagList.length;i++){
	                    		var tag=tagList[i];
	                    		html+='<span class="tagsSpan">'+tag.title+'</span>';
	                    	}
                    	}
                    	$('#biaoQian').html(html);
                    	$('#descript').html(data.introduce);
                    	var teacherExperienceList=data.teacherExperienceList;
                    	var exp_html="";
                    	if(teacherExperienceList){
                    		for(var i=0;i<teacherExperienceList.length;i++){
                    			var teacherExp=teacherExperienceList[i];
                    			exp_html+='<li><div>'+teacherExp.start_time+'-'+teacherExp.end_time+'</div><div>'+teacherExp.description+'</div></li>';
                    			if(i==teacherExperienceList.length-1){
                    				exp_html+='<div class="about4_icon_cover"><li><div>'+teacherExp.start_time+'-'+teacherExp.end_time+'</div><div>'+teacherExp.description+'</div></li></div>';
                    			}
                    		}
                    	}
                    	$('#exp').html(exp_html);
                    },
                    	
                    error:function(data) {
                        alert(data);
                    }
                 });
         },
					/*图片加载*/
					default:function(){
						var_t=this;
						$('img').error(function(){
							$(this).attr("src","../images/default.png");
						});
					},
					/*课程提纲*/
					syllabus:function(){
						var _t=this;
							var url=location.search; 
						if(url.indexOf("?")!=-1) 
						{
							function GetQueryString(name)
							{
							     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
							     var r = window.location.search.substr(1).match(reg);
							     if(r!=null)return  unescape(r[2]); return null;
							}
							GetQueryString("id");
							var idNum=GetQueryString("id");
							var userId=GetQueryString("user_id");
							var relaId=idNum;
							var uId=userId;
							var parm={"id":userId,"teacher_id":idNum,"page":1,"page_size":4};
							}
							else{
								var parm={"id":1,"teacher_id":1,"page":1,"page_size":4};
								var relaId=1;
								var uId=1;
							}
						$.ajax({
			              type: 'POST',
			              url: jieUrl+'100470',
			              data:parm,
			              headers:{ut:tokenData},
			              dataType: 'json',
			              success: function(data) {
			              	var data=data.d;
			              	if(data.length>0){
			              		var con="<div class='video-block'>";
			              		for(i=0;i<data.length;i++){
			              			if(data[i].imgurl==null){
			              				data[i].imgurl="../images/default.png";
			              			}else{
			              				if(data[i].imgurl.indexOf("http")<0){
					              			data[i].imgurl=imgUrl+data[i].imgurl;
					              		}
			              			}
			              		 con+="<div class='course-wrapper'><div class='conten-out' data-id='"+data[i].id+"' data-kill='"+data[i].is_kill+"' data-id='"+data[i].id+"' data-course='"+data[i].course_type+"' data-type='"+data[i].type+"'><img class='index-img' src='../images/onVideo.png' /><img class='starVideo' src='../images/onVideoStart.png'/><img src='"+data[i].imgurl+"' /></div><p class='tea-course-tit'><span class='blue-video'>视频课</span>"+data[i].title+"</p></div>";
			              		}
			              		if(data.length==4){
			              		con+="</div>";
			              		$(".seeMore").show();
			              		}else  if(data.length<4){
			              			con+="</div>";
			              		}
			              		$("#MuluId").html(con);
			              		_t.default();
			              	}else{
			              		$("#MuluId").html("<p class='greyFont marBottom10 padBottom10'>暂无课程记录</p>");
			              		$(".seeMore").hide();
			              	}
			              	var page=1;
			              	$(".seeMore").on('click',function(){
			              		page++;
			              		_t.loadMore(page,idNum,userId);
			              	});
			              	/*点击跳转视频页面*/
			              	$(".course-wrapper>.conten-out").each(function(index,element){
			              		$(this).on('click',function(){
			              			var videoType=$(this).attr("data-course");
			              			var lineType=$(this).attr("data-type");
			              			var kill=$(this).attr("data-kill");
			              			var dataId=$(this).attr("data-id");
			              			/*全课程*/
			              			if(videoType==1){
			              				/*秒杀课*/
			              				if(kill==1){
//			              						if(lineType==1){
//					              					/*视频课*/
//					              					console.log("第咦种啊第二种")
//						              					window.location.href=pageUrl+'msg/207m.html?id='+relaId+"&"+"user_id="+uId;
//						              				}else{
//						              					console.log("第二种啊第二种")
//						              					window.location.href=pageUrl+'msg/207m-2.html?id='+relaId+"&"+"user_id="+uId;
//						              				}
			              				}else if(kill==0){
//			              						if(lineType==1){
//					              					/*视频课*/
//					              					window.location.href=pageUrl+'msg/207.html?id='+relaId+"&"+"user_id="+uId;
//					              				}else{
//					              					window.location.href=pageUrl+'msg/207-2.html?id='+relaId+"&"+"user_id="+uId;
//					              				}
			              				}
			              			}else if(videoType==2){
			              				/*直播课*/
			              				//window.location.href=pageUrl+'msg/222.html?id='+relaId+"&"+"user_id="+uId;
			              			}
			              			else if(videoType==3){
			              				//alert(pageUrl+'msg/232.html?id='+relaId+"&"+"user_id="+uId)
			              				/*分期返*/
//			              				if(lineType==1){
//			              					/*视频课*/
//			              				window.location.href=pageUrl+'msg/232.html?id='+relaId+"&"+"user_id="+uId;
//			              				}else{
//			              				window.location.href=pageUrl+'msg/232-2.html?id='+relaId+"&"+"user_id="+uId;
//			              				}
			              			}else if(videoType==4){
			              				/*一元课*/
//			              				if(lineType==1){
//			              				window.location.href=pageUrl+'msg/241.html?id='+relaId+"&"+"user_id="+uId;
//			              				}else{
//			              				window.location.href=pageUrl+'msg/241-2.html?id='+relaId+"&"+"user_id="+uId;
//			              				}
			              			}
		                       	if(isAndroid==1){
																//此处是安卓的留白
																//{dataId,videoType,kill,lineType}
																window.android.classType(dataId,videoType,kill,lineType);
															}else if(isiOS==1){
									        			window.webkit.messageHandlers.classType.postMessage({id:dataId,type:videoType,iskill:kill,line:lineType});
															}
			              		});
			              	});
			              	_t.default();
			              	
			              },
			              error: function(xhr, type) {
			                console.info("服务器出错");
			              }
			            })
					},
					 /*查看更多*/
             loadMore:function(page,idNum,userId){
             	var _t=this;
             	var parm={"id":userId,"teacher_id":idNum,"page":page,"page_size":4};
             	console.log(parm)
             		$.ajax({
			              type: 'POST',
			              url: jieUrl+'100470',
			              data:parm,
			              headers:{ut:tokenData},
			              dataType: 'json',
			              success: function(data) {
			              	var data=data.d;
			              		var con="<div class='video-block'>";
			              		for(i=0;i<data.length;i++){
			              				if(data[i].imgurl.indexOf("http")<0){
					              			data[i].imgurl=imgUrl+data[i].imgurl;
					              		}
			              		 con+="<div class='course-wrapper'><div class='conten-out'><img class='index-img' src='../images/onVideo.png' /><img class='starVideo' src='../images/onVideoStart.png'/><img src='"+data[i].imgurl+"' data-id='"+data[i].id+"' data-course='"+data[i].course_type+"' data-type='"+data[i].type+"'/></div><p class='tea-course-tit'>"+data[i].title+"</p></div>";
			              		}
			              		if(data.length==4){
			              		con+="</div>";
			              		}else  if(data.length<4){
			              			con+="</div><p class='seeMore'>没有更多课程了</p>";
			              			$(".seeMore").hide();
			              		}
			              		$("#MuluId").append(con);
			              		$(".conten-out").each(function(index,element){
			              		$(this).on('click',function(){
			              			var videoType=$(this).attr("data-course");
			              			var lineType=$(this).attr("data-type");
			              			var kill=$(this).attr("data-kill");
			              			var dataId=$(this).attr("data-id");
			              			/*全课程*/
			              			if(videoType==1){
			              				/*秒杀课*/
			              				if(kill==1){
//			              						if(lineType==1){
//					              					/*视频课*/
//						              					window.location.href=pageUrl+'msg/207m.html?id='+relaId+"&"+"user_id="+uId;
//						              				}else{
//						              					window.location.href=pageUrl+'msg/207m-2.html?id='+relaId+"&"+"user_id="+uId;
//						              				}
			              				}else if(kill==0){
//			              						if(lineType==1){
//					              					/*视频课*/
//					              					window.location.href=pageUrl+'msg/207.html?id='+relaId+"&"+"user_id="+uId;
//					              				}else{
//					              					window.location.href=pageUrl+'msg/207-2.html?id='+relaId+"&"+"user_id="+uId;
//					              				}
			              				}
			              			}else if(videoType==2){
			              				/*直播课*/
			              				//window.location.href=pageUrl+'msg/222.html?id='+relaId+"&"+"user_id="+uId;
			              			}
			              			else if(videoType==3){
			              				/*分期返*/
//			              				if(lineType==1){
//			              					/*视频课*/
//			              				window.location.href=pageUrl+'msg/232.html?id='+relaId+"&"+"user_id="+uId;
//			              				}else{
//			              				window.location.href=pageUrl+'msg/232-2.html?id='+relaId+"&"+"user_id="+uId;
//			              				}
			              			}else if(videoType==4){
			              				/*一元课*/
//			              				if(lineType==1){
//			              				window.location.href=pageUrl+'msg/241.html?id='+relaId+"&"+"user_id="+uId;
//			              				}else{
//			              				window.location.href=pageUrl+'msg/241-2.html?id='+relaId+"&"+"user_id="+uId;
//			              				}

			              			}
		                       	if(isAndroid==1){
																//此处是安卓的留白
																//{dataId,videoType,kill,lineType}
																window.android.classType(dataId,videoType,kill,lineType);
															}else if(isiOS==1){
									        			window.webkit.messageHandlers.classType.postMessage({id:dataId,type:videoType,iskill:kill,line:lineType});
															}
			              		});
			              	});
			              		_t.default();
			              }
			              });
             }
        }
        $(function() {
          g.init();
        });
      })($);</script>
       
    </body>

</html>